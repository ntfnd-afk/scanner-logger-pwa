# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é hotfix –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç `31.10 - 01.11` API –≤–æ–∑–≤—Ä–∞—â–∞–ª –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, —Ö–æ—Ç—è –¥–∞–Ω–Ω—ã–µ –∑–∞ 01.11 –µ—Å—Ç—å –≤ –ë–î.

**–ü—Ä–∏—á–∏–Ω–∞**: –ë—ç–∫–µ–Ω–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –ø–∞—Ä–∞–º–µ—Ç—Ä `date_end` –≤ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö.

## –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `date_end` –≤ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `/api/v1/dashboard/state`
- `/api/v1/dashboard/boxes`
- `/api/v1/dashboard/raw`

## –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π

### Windows (PowerShell)
```powershell
cd c:\Fulfillment\scanner-logger-pwa
.\deploy_hotfix.ps1
```

### Linux/Mac
```bash
cd /path/to/scanner-logger-pwa
chmod +x deploy_hotfix.sh
./deploy_hotfix.sh
```

## –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é:

```bash
# 1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp backend/app/api/dashboard.py ubuntu@51.250.107.231:~/scanner/backend/app/api/

# 2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh ubuntu@51.250.107.231

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥
cd ~/scanner
docker-compose restart backend

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f backend
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –í –ª–æ–≥–∞—Ö –±—ç–∫–µ–Ω–¥–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üìÖ Date range: 2025-10-31 00:00:00+00:00 - 2025-11-01 23:59:59.999999+00:00
üîç get_raw_logs: date=2025-10-31, date_end=2025-11-01, operator=None, client=None, city=None, type=None
‚úÖ get_raw_logs: found 49 events
```

### 2. –í –¥–∞—à–±–æ—Ä–¥–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://ntfnd-afk.github.io/scanner-logger-pwa/dashboard/
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console
3. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã: –û—Ç `31.10.2025` –î–æ `01.11.2025`
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°—ã—Ä—ã–µ –ª–æ–≥–∏"
5. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –æ–±–∞ –¥–Ω—è

### 3. –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
üìÖ Filters updated: {startDate: '2025-10-31', endDate: '2025-11-01', ...}
üì° API request: /dashboard/raw?date=2025-10-31&date_end=2025-11-01
üìä Raw logs data: {logs: Array(49), total: 49}
üìä Raw logs count: 49 Total: 49
```

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –ë—ç–∫–µ–Ω–¥ (`backend/app/api/dashboard.py`)
1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `parse_date_range()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
2. –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞—é—Ç `date_end`
3. –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã: `client`, `city`, `type` –≤ `/raw`
4. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (—É–∂–µ –≥–æ—Ç–æ–≤)
1. `dashboard/src/App.jsx`: –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
2. `dashboard/src/api/client.js`: –æ—Ç–ø—Ä–∞–≤–∫–∞ `date_end` –≤ API

## –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
ssh ubuntu@51.250.107.231
cd ~/scanner
git checkout HEAD~1 backend/app/api/dashboard.py
docker-compose restart backend
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ `backend/HOTFIX_DATE_RANGE.md`
- –û—Ç–ª–∞–¥–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ `dashboard/DATE_FILTER_DEBUG.md`

