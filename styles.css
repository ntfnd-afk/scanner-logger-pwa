/* core theme */
:root{ --bg:#0a0b0d; --card:#151618; --muted:#202227; --text:#eceef1; --text-dim:#a8adb6; --accent:#3b82f6; --ok:#16a34a; --warn:#eab308; --err:#ef4444; --border:#1d2026; --radius:18px; --shadow:0 8px 28px rgba(0,0,0,.45); --safe-top:env(safe-area-inset-top,0); --safe-bot:env(safe-area-inset-bottom,0) }
html[data-theme=light]{ --bg:#f7f8fa; --card:#fff; --muted:#f0f3f7; --text:#0f1216; --text-dim:#5b616b; --accent:#2563eb; --ok:#15803d; --warn:#b45309; --err:#b91c1c; --border:#e6e8ee; --shadow:0 8px 28px rgba(15,17,21,.06) }
*{box-sizing:border-box} html,body{height:100%} body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;-webkit-font-smoothing:antialiased;line-height:1.4;background:var(--bg);color:var(--text);font-size:clamp(15px,1.2vw + .5vh,18px)}
#scan-input{position:absolute;top:-10000px;left:-10000px;width:10px;height:10px;opacity:0}
.app{min-height:100%}.container{max-width:1260px;margin:0 auto;padding:12px 20px calc(64px + var(--safe-bot));display:flex;flex-direction:column;gap:12px}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)} .hd{padding:1rem 1.1rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.hd h2{margin:0;font-size:1.25rem;font-weight:800}.bd{padding:14px 16px 18px}.hint{color:var(--text-dim);font-size:.92rem}
.status{position:sticky;top:var(--safe-top);z-index:10;width:100%;border-radius:calc(var(--radius) + 2px);padding:1.2rem 1.5rem;background:linear-gradient(0deg,rgba(255,255,255,.02),rgba(255,255,255,.02)),var(--card);border:1px solid var(--border);box-shadow:var(--shadow);display:flex;align-items:center;justify-content:space-between;gap:1.2rem;font-size:1rem}
.status .pill{padding:.6rem 1rem;border-radius:999px;font-weight:900;text-transform:uppercase;font-size:1rem;background:rgba(127,127,127,.12);letter-spacing:0.05em}
.status--ok{outline:2px solid color-mix(in oklab,var(--ok) 35%, transparent)} .status--warn{outline:2px solid color-mix(in oklab,var(--warn) 35%, transparent)} .status--error{outline:2px solid color-mix(in oklab,var(--err) 35%, transparent)} .status .state{color:var(--ok)} .status .meta{color:var(--text-dim);font-size:.95rem}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
/* Landscape-only: убрали двухколоночный layout */
.current{display:grid;grid-template-columns:1.3fr 1fr 1fr 1fr 1fr;gap:10px;align-items:end}
.kv{background:var(--muted);border:1px solid var(--border);border-radius:14px;padding:.85rem 1rem;min-height:clamp(56px,7vh,82px)}
.kv small{display:block;color:var(--text-dim);font-size:.85rem;margin-bottom:.4rem}
.kv .val{font-size:clamp(1rem,2.2vw,1.35rem);font-weight:900}
.kv.big .val{font-size:clamp(2.2rem,6vw,3.6rem);line-height:1}
.tabs{margin-top:.7rem;display:flex;gap:.6rem;flex-wrap:wrap}
.tab{padding:.6rem .85rem;min-height:44px;display:inline-flex;align-items:center;justify-content:center;border-radius:999px;background:var(--muted);border:1px solid var(--border);color:var(--text);font-weight:800;font-size:.95rem;cursor:pointer}
.tab.active{outline:2px solid color-mix(in oklab,var(--accent) 35%, transparent)}
.list{margin-top:.7rem;display:grid;grid-template-columns: repeat(3,1fr);gap:.7rem}
.chip{padding:.9rem 1rem;border-radius:14px;background:var(--muted);border:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:.6rem}
.chip small{color:var(--text-dim)}
@media(max-width:980px){.current{grid-template-columns:1fr 1fr}.kv.big{grid-column:1/-1}.list{grid-template-columns:1fr 1fr}}
@media(max-width:620px){.status{font-size:.95rem}.list{grid-template-columns:1fr}}
.drawer-wrap{position:relative}#drawer{opacity:0;pointer-events:none;position:absolute}
.backdrop{position:fixed;inset:0;background:color-mix(in oklab,var(--bg) 60%, black);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:1000}
#drawer:checked ~ .backdrop{opacity:.55;pointer-events:auto}
.drawer{position:fixed;top:0;right:0;height:100svh;width:min(85vw,600px);transform:translateX(8px);opacity:0;pointer-events:none;transition:transform .22s ease,opacity .22s ease;z-index:1002}
#drawer:checked ~ .drawer{transform:translateX(0);opacity:1;pointer-events:auto}
.sheet{height:100%;display:flex;flex-direction:column;background:var(--card);border-left:1px solid var(--border);box-shadow:var(--shadow);border-top-left-radius:18px;border-bottom-left-radius:18px;overflow:hidden}
.sheet .hdr{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:1.2rem 1.5rem;border-bottom:1px solid var(--border)}
.sheet .hdr .ttl{font-weight:800;font-size:1.4rem}.sheet .hdr .close{display:inline-flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:14px;background:var(--muted);border:2px solid var(--border);font-weight:900;font-size:1.8rem;cursor:pointer;transition:all .2s}
.sheet .hdr .close:hover{background:var(--card);border-color:var(--accent)}
.sheet .body{flex:1 1 auto;overflow:auto;padding:1.2rem 1.5rem;display:flex;flex-direction:column;gap:1rem}
.row{display:flex;gap:.8rem;align-items:center;flex-wrap:wrap}
.btn{flex:1;min-width:160px;text-align:center;padding:1rem 1.2rem;border-radius:14px;background:var(--muted);border:2px solid var(--border);color:var(--text);font-weight:900;font-size:1.05rem;cursor:pointer;transition:all .2s}
.btn:hover{background:var(--card);border-color:var(--accent)}
.btn.primary{outline:3px solid color-mix(in oklab,var(--accent) 35%, transparent);border-color:var(--accent)}
.theme-line{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:.6rem 0}.theme-note{color:var(--text-dim);font-size:1.1rem;font-weight:600}
.switch{--h:36px;--w:72px;--p:3px;position:relative;width:var(--w);height:var(--h);background:var(--muted);border:2px solid var(--border);border-radius:999px}.switch input{position:absolute;opacity:0}.knob{position:absolute;top:var(--p);left:var(--p);width:calc(var(--h) - var(--p)*2);height:calc(var(--h) - var(--p)*2);border-radius:999px;background:var(--card);border:2px solid var(--border);transition:transform .18s ease} html[data-theme=light] .knob{transform:translateX(calc(var(--w) - var(--h)))}
.text{width:100%;padding:.9rem 1rem;border-radius:12px;border:2px solid var(--border);background:var(--muted);color:var(--text);font-size:1.05rem;outline:none;transition:border-color .2s}.text:focus{border-color:var(--accent)}.text::placeholder{color:var(--text-dim)}
.accordion{display:grid;gap:.5rem}.acc-item{border:1px solid var(--border);border-radius:14px;background:var(--muted);overflow:hidden}.acc-hd{display:flex;align-items:center;justify-content:space-between;gap:.6rem;padding:.75rem 1rem;cursor:pointer}.acc-hd strong{font-weight:800}.acc-bd{display:none;padding:.6rem 1rem;background:var(--card);border-top:1px solid var(--border)}.acc-item.open .acc-bd{display:block}.acc-meta{color:var(--text-dim);font-size:.92rem}
.sel{padding:.55rem .7rem;border-radius:12px;border:1px solid var(--border);background:var(--muted);color:var(--text)}
.kv .val.muted{color:var(--text-dim)} .kv .val.ok{color:var(--ok)} .kv .val.err{color:var(--err)}
.spin{width:16px;height:16px;border-radius:50%;border:2px solid color-mix(in oklab,var(--text) 25%, transparent);border-top-color:var(--accent);animation:r .8s linear infinite;display:inline-block}@keyframes r{to{transform:rotate(360deg)}}
.grid-sm{display:grid;grid-template-columns:repeat(3,1fr);gap:.6rem}@media(max-width:980px){.grid-sm{grid-template-columns:repeat(2,1fr)}}@media(max-width:620px){.grid-sm{grid-template-columns:1fr}}.card-btn{cursor:pointer;user-select:none}
/* Actions UX one-line */
.lines{ display:grid; gap:.5rem }
.line{ display:grid; grid-template-columns: 90px 1fr; align-items:center; gap:.8rem; padding:.75rem 1rem; background:var(--muted); border:1px solid var(--border); border-radius:12px }
.line .time{ color:var(--text-dim); font-variant-numeric:tabular-nums }
.line .main{ display:flex; gap:.8rem; align-items:center; min-width:0 }
.line .type{ font-weight:800; white-space:nowrap }
.line .code{ color:var(--text-dim); white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
@media(max-width:700px){ .line{ grid-template-columns:78px 1fr } }
.foot{margin-top:.4rem;color:var(--text-dim);font-size:.8rem;text-align:center;padding-bottom:max(16px,var(--safe-bot))}


/* v22e: Actions list is single column and full width */
.list.list--actions{ grid-template-columns:1fr }


/* v22f: UI polish */
.chip small{ white-space:nowrap } /* prevent wrapping like 'коробов: 2' */
.badge{ min-width:28px; height:28px; border-radius:10px; background:var(--muted); border:1px solid var(--border);
        display:inline-flex; align-items:center; justify-content:center; font-weight:900; padding:0 .5rem; }
.list .acc-hd{ display:flex; align-items:center; gap:.9rem }
.list .acc-hd .acc-title{ font-weight:800 }
.list .acc-hd .acc-meta{ color:var(--text-dim) }
.acc-item.open .acc-bd{ display:block }


/* v22g-fixed: Boxes list should be single column */
.list.list--one{ grid-template-columns:1fr }

/* v24: Warehouse-optimized design */
.status-new{ display:flex; flex-direction:column; gap:1rem; width:100%; padding:.5rem 0 }
.status-header{ display:flex; justify-content:flex-end; align-items:center; gap:.8rem; padding:0 .5rem }
.operator-name{ font-size:1.2rem; font-weight:700; color:var(--text) }
.online-dot{ width:18px; height:18px; border-radius:50%; background:var(--ok); box-shadow:0 0 12px var(--ok), 0 0 20px var(--ok) }
.online-dot.offline{ background:var(--err); box-shadow:0 0 12px var(--err) }

.status-body{ display:grid; grid-template-columns:1fr auto; gap:2rem; align-items:center }
.metrics-left{ display:flex; flex-direction:column; gap:1.5rem; flex:1 }
.metric-row{ display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:1.5rem }
.metric-item{ display:flex; flex-direction:column; gap:.4rem }
.metric-label{ font-size:.95rem; color:var(--text-dim); font-weight:500; text-transform:uppercase; letter-spacing:0.03em }
.metric-value{ font-size:1.8rem; font-weight:800; color:var(--text); text-transform:uppercase }
.metric-divider{ width:2px; height:60px; background:var(--border); align-self:center }

.count-right{ display:flex; flex-direction:column; align-items:center; justify-content:center; background:var(--muted); border:3px solid var(--border); border-radius:20px; padding:1.5rem 2.5rem; min-width:220px }
.count-label{ font-size:1rem; color:var(--text-dim); text-align:center; margin-bottom:.8rem; line-height:1.3; font-weight:600 }
.count-huge{ font-size:5rem; font-weight:900; line-height:1; color:var(--accent); transition:color .2s ease }
.count-huge.ok{ color:var(--ok) }
.count-huge.err{ color:var(--err) }

.bd.no-padding{ padding:0 }
.app-layout{ display:grid; grid-template-columns:auto 1fr; gap:12px; padding:1rem; align-items:start }
.main-content{ display:flex; flex-direction:column; gap:12px; min-width:0; flex:1 }
.sidebar-nav{ display:flex; flex-direction:column; gap:1rem; padding:1rem; background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); align-self:start; position:sticky; top:1rem; max-height:calc(100vh - 2rem) }
.nav-tabs-vertical{ display:flex; flex-direction:column; gap:.8rem }
.nav-tab{ display:flex; align-items:center; justify-content:center; width:64px; height:64px; background:var(--muted); border:2px solid var(--border); border-radius:16px; cursor:pointer; transition:all .2s ease }
.nav-tab:hover{ background:var(--card); border-color:var(--accent); transform:scale(1.05) }
.nav-tab.active{ border-color:var(--accent); background:var(--card); box-shadow:0 0 0 3px var(--accent) }
.nav-icon{ font-size:2.2rem; line-height:1 }
.nav-menu{ display:flex; align-items:center; justify-content:center; width:64px; height:64px; background:var(--muted); border:2px solid var(--border); border-radius:16px; cursor:pointer; transition:all .2s ease; margin-top:auto }
.nav-menu:hover{ background:var(--card); border-color:var(--accent); transform:scale(1.05) }
.menu-icon{ font-size:2.2rem; font-weight:700; line-height:1 }
.content-area{ flex:1; overflow:auto; min-width:0 }
#tabContent{ padding:1rem }
