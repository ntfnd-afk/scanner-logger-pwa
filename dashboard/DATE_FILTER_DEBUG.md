# ÐžÑ‚Ð»Ð°Ð´ÐºÐ° Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² Ð¿Ð¾ Ð´Ð°Ñ‚Ð°Ð¼

## ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°
ÐŸÑ€Ð¸ Ð²Ñ‹Ð±Ð¾Ñ€Ðµ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ð° Ð´Ð°Ñ‚ `31.09 - 01.10` Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑÑ, Ñ…Ð¾Ñ‚Ñ Ð¿Ñ€Ð¸ `01.10 - 01.10` Ð²ÑÑ‘ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚.

## ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°
31 ÑÐµÐ½Ñ‚ÑÐ±Ñ€Ñ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ (Ð² ÑÐµÐ½Ñ‚ÑÐ±Ñ€Ðµ 30 Ð´Ð½ÐµÐ¹), Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð¼Ð¾Ð¶ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ñ‚Ñƒ Ð½Ð° 01.10, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð²Ð¾Ð´Ð¸Ñ‚ Ðº Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¼Ñƒ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ñƒ `startDate > endDate`.

## Ð ÐµÑˆÐµÐ½Ð¸Ðµ
Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ð° Ð´Ð°Ñ‚:
- Ð•ÑÐ»Ð¸ `startDate > endDate`, Ñ‚Ð¾ `endDate` Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ñ€Ð°Ð²Ð½Ñ‹Ð¼ `startDate`
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°

## ÐšÐ°Ðº Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ

### 1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ DevTools (F12) â†’ Console

### 2. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´Ð°Ñ‚Ñ‹ Ð² Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ðµ
ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ€Ð°Ð·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¸:
- `01.11.2025 - 01.11.2025` (Ð¾Ð´Ð½Ð° Ð´Ð°Ñ‚Ð°)
- `31.10.2025 - 01.11.2025` (Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½)
- `01.11.2025 - 31.10.2025` (Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ - Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒÑÑ)

### 3. Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸

#### Ð›Ð¾Ð³Ð¸ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²:
```
ðŸ“… Filters updated: {startDate: "2025-11-01", endDate: "2025-11-01", ...}
```

Ð•ÑÐ»Ð¸ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹, ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ:
```
âš ï¸ startDate > endDate, ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ endDate: {startDate: "2025-11-01", endDate: "2025-10-31"}
```

#### Ð›Ð¾Ð³Ð¸ API Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²:
```
ðŸ“¡ API request: /dashboard/state?date=2025-11-01&date_end=2025-11-01
{
  filters: {startDate: "2025-11-01", endDate: "2025-11-01", ...},
  parsedParams: {date: "2025-11-01", date_end: "2025-11-01"}
}
```

#### Ð›Ð¾Ð³Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…:
```
ðŸ” Loading data with filters: {startDate: "2025-11-01", endDate: "2025-11-01", ...}
Dashboard data: {feed: Array(49), operators: Array(1), ...}
```

### 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¾Ñ‚Ð²ÐµÑ‚ API
Ð’ DevTools â†’ Network â†’ Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ðº `/dashboard/state` Ð¸Ð»Ð¸ `/dashboard/raw`:
- **Request URL**: Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ `date=2025-11-01&date_end=2025-11-01`
- **Response**: Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð² `feed` Ð¸Ð»Ð¸ `logs` Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸

## Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ

### âœ… Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾:
- ÐžÐ´Ð½Ð° Ð´Ð°Ñ‚Ð°: `01.11 - 01.11` â†’ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð·Ð° 01.11
- Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½: `31.10 - 01.11` â†’ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð·Ð° 31.10 Ð¸ 01.11
- ÐÐ²Ñ‚Ð¾ÐºÐ¾Ñ€Ñ€ÐµÐºÑ†Ð¸Ñ: `01.11 - 31.10` â†’ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð½Ð° `01.11 - 01.11`

### âŒ Ð•ÑÐ»Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ:

1. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÐµÑÑ‚ÑŒ Ð² Ð‘Ð” Ð·Ð° ÑÑ‚Ñƒ Ð´Ð°Ñ‚Ñƒ**
   ```sql
   SELECT COUNT(*), DATE(ts) as date 
   FROM events 
   WHERE ts >= '2025-10-31' AND ts <= '2025-11-01 23:59:59'
   GROUP BY DATE(ts);
   ```

2. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð´Ð°Ñ‚Ñ‹ Ð² API**
   - Ð¤Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚: `YYYY-MM-DD` (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `2025-11-01`)
   - Ð‘ÑÐºÐµÐ½Ð´ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚: `YYYY-MM-DD` Ð¸Ð»Ð¸ `MM.DD.YYYY`?
   
3. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ timezone**
   - Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð² Ð‘Ð” Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð² UTC
   - Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð½Ð° Ñ„Ñ€Ð¾Ð½Ñ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°

4. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ÐºÑƒ Ð±ÑÐºÐµÐ½Ð´Ð°**
   - Ð•ÑÐ»Ð¸ `date_end` Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½, Ð±ÑÐºÐµÐ½Ð´ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸ÑÐºÐ°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð·Ð° `date`
   - Ð•ÑÐ»Ð¸ Ð¾Ð±Ð° ÑƒÐºÐ°Ð·Ð°Ð½Ñ‹, Ð±ÑÐºÐµÐ½Ð´ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸ÑÐºÐ°Ñ‚ÑŒ Ð² Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ðµ `date <= ts <= date_end 23:59:59`

## Ð˜Ð·Ð¼ÐµÐ½Ñ‘Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

### `dashboard/src/App.jsx`
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ `handleFilterChange` Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÐµÐ¹ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ð° Ð´Ð°Ñ‚
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²

### `dashboard/src/api/client.js`
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… API Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð½ÐµÐ´Ð¾ÑÑ‚Ð°ÑŽÑ‰Ð¸Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ `date_end` Ð¸ `city` Ð² `getBoxes()`

## Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸

Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ:
1. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð²ÑÐµ Ð»Ð¾Ð³Ð¸ Ð¸Ð· ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¾Ñ‚Ð²ÐµÑ‚ API Ð² Network tab
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ð‘Ð” Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ñ‡ÐµÑ€ÐµÐ· SQL
4. Ð¡Ð¾Ð¾Ð±Ñ‰Ð¸Ñ‚Ðµ Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ðµ Ñ Ð¿Ð¾Ð»Ð½Ñ‹Ð¼Ð¸ Ð»Ð¾Ð³Ð°Ð¼Ð¸

