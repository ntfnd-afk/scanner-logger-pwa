<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="description" content="Progressive Web App –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤ —Å –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–æ–º –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å Google Sheets"/>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://script.google.com; style-src 'self' 'unsafe-inline'; connect-src 'self' https://script.google.com https://script.googleusercontent.com; img-src 'self' data:; manifest-src 'self';"/>
  <title>Scanner Logger ‚Äî v25-sidebar-left</title>
  <!-- Deployed to GitHub Pages -->
  <meta name="theme-color" content="#0a0b0d"/>
  <link rel="manifest" href="manifest.webmanifest"/>
  <link rel="icon" href="assets/icon-192.png" sizes="192x192"/>
  <link rel="apple-touch-icon" href="assets/icon-192.png"/>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <input id="scan-input" autofocus autocomplete="off" inputmode="none" aria-hidden="true"/>

  <div class="app">
    <div class="app-layout">
      <aside class="sidebar-nav">
        <div class="nav-tabs-vertical" role="tablist">
          <button class="nav-tab active" data-tab="actions" role="tab" aria-selected="true" title="–î–µ–π—Å—Ç–≤–∏—è">
            <span class="nav-icon">üìã</span>
          </button>
          <button class="nav-tab" data-tab="today" role="tab" title="–°–µ–≥–æ–¥–Ω—è">
            <span class="nav-icon">üìä</span>
          </button>
          <button class="nav-tab" data-tab="clients" role="tab" title="–ö–ª–∏–µ–Ω—Ç—ã">
            <span class="nav-icon">üë•</span>
          </button>
          <button class="nav-tab" data-tab="boxes" role="tab" title="–ö–æ—Ä–æ–±–∞">
            <span class="nav-icon">üì¶</span>
          </button>
        </div>
        <button class="nav-menu" id="navMenuBtn" title="–ú–µ–Ω—é">
          <span class="menu-icon">‚â°</span>
        </button>
      </aside>

      <div class="main-content">
        <section id="statusBar" class="status status--ok card" role="status" aria-live="polite">
          <div class="status-new">
            <div class="status-header">
              <div id="operatorName" class="operator-name">–û–ø–µ—Ä–∞—Ç–æ—Ä</div>
              <div id="onlineIndicator" class="online-dot" title="–û–Ω–ª–∞–π–Ω"></div>
            </div>
            <div class="status-body">
              <div class="metrics-left">
                <div class="metric-row">
                  <div class="metric-item">
                    <div class="metric-label">–°–∫–ª–∞–¥</div>
                    <div id="cityVal" class="metric-value">‚Äî</div>
                  </div>
                  <div class="metric-divider"></div>
                  <div class="metric-item">
                    <div class="metric-label">–ö–ª–∏–µ–Ω—Ç</div>
                    <div id="clientVal" class="metric-value">‚Äî</div>
                  </div>
                </div>
                <div class="metric-row">
                  <div class="metric-item">
                    <div class="metric-label">‚Ññ –∫–æ—Ä–æ–±–∞</div>
                    <div id="boxVal" class="metric-value">‚Ññ‚Äî</div>
                  </div>
                  <div class="metric-divider"></div>
                  <div class="metric-item">
                    <div class="metric-label">–≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ—Ä–æ–±–∞</div>
                    <div id="boxStartVal" class="metric-value">‚Äî</div>
                  </div>
                </div>
              </div>
              <div class="count-right">
                <div class="count-label">–®—Ç—É–∫ –≤ –∫–æ—Ä–æ–±–µ<br>(–æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ)</div>
                <div id="itemsCountVal" class="count-huge">0</div>
              </div>
            </div>
          </div>
        </section>

        <section class="content-area card">
          <div id="tabContent" class="list" aria-live="polite"></div>
        </section>
      </div>
    </div>

    <div class="drawer-wrap">
        <input id="drawer" type="checkbox"/>
        <label class="backdrop" for="drawer"></label>

        <div class="drawer">
          <div class="sheet">
            <div class="hdr">
              <div class="ttl">–ú–µ–Ω—é</div>
              <label class="close" for="drawer" title="–ó–∞–∫—Ä—ã—Ç—å">√ó</label>
            </div>
            <div class="body">
              <div class="row">
                <button id="btnSync" class="btn primary">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
                <button id="btnSyncNow" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ–π—á–∞—Å</button>
                <button id="btnTest" class="btn">–¢–µ—Å—Ç —Å–∏–Ω–∫–∞</button>
                <button id="btnResendToday" class="btn">–ü–µ—Ä–µ—Å–ª–∞—Ç—å –∑–∞ —Å–µ–≥–æ–¥–Ω—è</button>
              </div>

              <div class="theme-line">
                <div class="theme-note">–¢–µ–º–∞: —Ç—ë–º–Ω–∞—è / —Å–≤–µ—Ç–ª–∞—è</div>
                <label class="switch" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                  <input id="themeToggle" type="checkbox"/>
                  <span class="knob" aria-hidden="true"></span>
                </label>
              </div>

              <div class="settings card" style="padding:1rem 1.2rem;">
                <div style="display:grid;grid-template-columns:1fr;gap:.8rem">
                  <label style="display:flex;flex-direction:column;gap:.5rem">
                    <span style="font-weight:700;font-size:1.05rem">SYNC_URL</span>
                    <input id="syncUrlInput" class="text" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ Apps Script URL"/>
                  </label>
                  <label class="row" style="align-items:center; gap:.8rem">
                    <input id="sendPlainInput" type="checkbox" checked style="width:24px;height:24px">
                    <span style="font-size:1.05rem">–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞–∫ <b>text/plain</b> (–±–µ–∑ preflight)</span>
                  </label>
                  <label class="row" style="align-items:center; gap:.8rem">
                    <input id="hardcapEnabledInput" type="checkbox" checked style="width:24px;height:24px">
                    <span style="font-size:1.05rem">–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ (HARD_CAP)</span>
                    <input id="hardcapSecondsInput" class="text" style="width:100px" placeholder="—Å–µ–∫." value="30">
                  </label>
                  <label style="display:flex;flex-direction:column;gap:.5rem">
                    <span style="font-weight:700;font-size:1.05rem">–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</span>
                    <input id="operatorInput" class="text" placeholder="–ò–≤–∞–Ω"/>
                  </label>
                  <div class="row" style="margin-top:.5rem">
                    <button id="btnSave" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <div id="saveStatus" style="font-size:1.1rem;font-weight:600;color:var(--ok)" aria-live="polite"></div>
                  </div>
                </div>
              </div>

              <div class="row">
                <button id="btnUpdateApp" class="btn">–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <dialog id="init-dlg">
    <div class="hd">–ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</div>
    <div class="bd">
      <label>SYNC URL</label>
      <input id="init-sync" placeholder="URL –∏–∑ Apps Script (Deploy ‚Üí Web app)">
      <label>–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</label>
      <input id="init-operator" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: s01-olga">
      <div class="hint">–≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –ò—Ö –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∂–µ –≤ –º–µ–Ω—é.</div>
    </div>
    <div class="ft">
      <button id="init-cancel" class="btn">–ó–∞–∫—Ä—ã—Ç—å</button>
      <button id="init-save" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>
  </dialog>

  <script type="module" src="vendor-idb.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
